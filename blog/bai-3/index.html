<!DOCTYPE html>
<html lang="vi">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bài 3 - TCP Socket – Giao tiếp có kết nối (Reliable Communication) - Blog cá nhân - Nguyễn Tiến Phước</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-blog">

  
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
/>

<header>
  <nav>
    <a href="/"><i class="fas fa-home"></i> Home</a>
    <a href="/blog/"><i class="fas fa-book"></i> Bài viết</a>
    <a href="/about/"><i class="fas fa-user"></i> Giới thiệu</a>
    
    <button id="theme-toggle" aria-label="Chuyển đổi giao diện">
      <i id="theme-icon" class="fas fa-sun"></i> Theme
    </button>
    
    <button id="search-toggle" aria-label="Tìm kiếm">
      <i class="fas fa-search"></i> Tìm kiếm
    </button>
  </nav>
  <div class="social-links">
    <a href="https://www.facebook.com/02p09" target="_blank" aria-label="Facebook">
      <i class="fab fa-facebook"></i>
    </a>
    <a href="mailto:vuphuoc2004@gmail.com" target="_blank" aria-label="Email">
      <i class="fas fa-envelope"></i>
    </a>
    <a href="https://github.com/phuoc0209" target="_blank" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </div>
  
  <div id="search-overlay" class="search-overlay">
    <div class="search-container">
      <div class="search-box">
        <input type="text" id="search-input" placeholder="Tìm kiếm bài viết, tag..." autocomplete="off">
        <button id="search-close" aria-label="Đóng tìm kiếm">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div id="search-results" class="search-results"></div>
    </div>
  </div>
</header>

<script>
  const toggleBtn = document.getElementById("theme-toggle");
  const icon = document.getElementById("theme-icon");

  
  if (localStorage.getItem("theme") === "dark") {
    document.documentElement.setAttribute("data-theme", "dark");
    icon.classList.replace("fa-sun", "fa-moon");
  }

  
  toggleBtn.addEventListener("click", () => {
    const currentTheme = document.documentElement.getAttribute("data-theme");
    const isDark = currentTheme === "dark";

    document.documentElement.setAttribute("data-theme", isDark ? "light" : "dark");
    localStorage.setItem("theme", isDark ? "light" : "dark");

    
    if (isDark) {
      
      icon.classList.replace("fa-moon", "fa-sun");
    } else {
      
      icon.classList.replace("fa-sun", "fa-moon");
    }
  });

  
  
  
  const searchToggle = document.getElementById('search-toggle');
  const searchOverlay = document.getElementById('search-overlay');
  const searchContainer = document.querySelector('.search-container');
  const searchInput = document.getElementById('search-input');
  const searchClose = document.getElementById('search-close');
  const searchResults = document.getElementById('search-results');

  
  searchToggle.addEventListener('click', () => {
    searchOverlay.classList.add('show');
    searchInput.focus();
  });

  
  searchClose.addEventListener('click', () => {
    searchOverlay.classList.remove('show');
    searchInput.value = '';
    searchResults.innerHTML = '';
  });

  
  document.addEventListener('click', (e) => {
    if (!searchOverlay.contains(e.target) && !searchToggle.contains(e.target)) {
      searchOverlay.classList.remove('show');
      searchInput.value = '';
      searchResults.innerHTML = '';
    }
  });

  
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && searchOverlay.classList.contains('show')) {
      searchOverlay.classList.remove('show');
      searchInput.value = '';
      searchResults.innerHTML = '';
    }
  });

  
  const searchData = [
    {
      title: "Giới thiệu ngôn ngữ Java",
      url: "/blog/java-gioi-thieu/",
      excerpt: "Java là một ngôn ngữ lập trình hướng đối tượng (OOP) mạnh mẽ, được phát triển bởi Sun Microsystems (nay thuộc Oracle) vào năm 1995. Đây là ngôn ngữ lập trình có khẩu hiệu nổi tiếng: 'Write once, run anywhere' – Viết một lần, chạy ở mọi nơi.",
      tags: ["Java", "Programming", "OOP", "JVM"]
    },
    {
      title: "Hướng dẫn lập trình Python",
      url: "/blog/python-tutorial/",
      excerpt: "Python là ngôn ngữ lập trình đơn giản, dễ học và mạnh mẽ. Python được sử dụng rộng rãi trong nhiều lĩnh vực như web development, data science, AI/ML...",
      tags: ["Python", "Tutorial", "Programming", "Web Development"]
    },
    {
      title: "JavaScript cơ bản",
      url: "/blog/javascript-basics/",
      excerpt: "JavaScript là ngôn ngữ lập trình phía client, được sử dụng rộng rãi trong web development. JavaScript giúp tạo ra các trang web tương tác và động...",
      tags: ["JavaScript", "Web", "Frontend", "DOM"]
    },
    {
      title: "React.js từ cơ bản đến nâng cao",
      url: "/blog/react-tutorial/",
      excerpt: "React là một thư viện JavaScript phổ biến để xây dựng giao diện người dùng, đặc biệt là các ứng dụng web đơn trang (SPA)...",
      tags: ["React", "JavaScript", "Frontend", "SPA"]
    },
    {
      title: "Node.js và Express.js",
      url: "/blog/nodejs-express/",
      excerpt: "Node.js cho phép chạy JavaScript trên server-side, kết hợp với Express.js framework để xây dựng các ứng dụng web và API...",
      tags: ["Node.js", "Express", "Backend", "API"]
    }
  ];

  
  searchInput.addEventListener('input', (e) => {
    const query = e.target.value.toLowerCase().trim();
    
    if (query.length < 2) {
      searchResults.innerHTML = '';
      return;
    }

    const results = searchData.filter(item => {
      const titleMatch = item.title.toLowerCase().includes(query);
      const excerptMatch = item.excerpt.toLowerCase().includes(query);
      const tagMatch = item.tags.some(tag => tag.toLowerCase().includes(query));
      
      return titleMatch || excerptMatch || tagMatch;
    });

    
    results.sort((a, b) => {
      const aTitleMatch = a.title.toLowerCase().includes(query);
      const bTitleMatch = b.title.toLowerCase().includes(query);
      
      if (aTitleMatch && !bTitleMatch) return -1;
      if (!aTitleMatch && bTitleMatch) return 1;
      return 0;
    });

    displaySearchResults(results, query);
  });

  
  function displaySearchResults(results, query) {
    if (results.length === 0) {
      searchResults.innerHTML = `
        <div class="search-no-results">
          <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 1rem; opacity: 0.5;"></i>
          <p>Không tìm thấy kết quả nào cho "<strong>${query}</strong>"</p>
          <p style="font-size: 0.9rem; margin-top: 0.5rem;">Thử tìm kiếm với từ khóa khác</p>
        </div>
      `;
      return;
    }

    const resultsHTML = results.map(item => `
      <div class="search-result-item" onclick="window.location.href='${item.url}'">
        <div class="search-result-title">${highlightText(item.title, query)}</div>
        <div class="search-result-excerpt">${highlightText(item.excerpt.substring(0, 150) + '...', query)}</div>
        <div class="search-result-tags">
          ${item.tags.map(tag => `<span class="search-result-tag">${tag}</span>`).join('')}
        </div>
      </div>
    `).join('');

    searchResults.innerHTML = resultsHTML;
  }

  
  function highlightText(text, query) {
    if (!query) return text;
    const regex = new RegExp(`(${query})`, 'gi');
    return text.replace(regex, '<mark>$1</mark>');
  }
</script>


  <main class="container">
    
    <article>
    <h1>Bài 3 - TCP Socket – Giao tiếp có kết nối (Reliable Communication)</h1>
    <p class="post-meta"><i>Đăng ngày 20/10/2025 lúc 00:00</i></p>
    <h2 id="1-giới-thiệu-về-tcp-socket">1. Giới thiệu về TCP Socket</h2>
<p><strong>TCP (Transmission Control Protocol)</strong> là giao thức truyền dữ liệu có kết nối, đảm bảo thông tin được gửi đến đúng đích và theo đúng thứ tự.<br>
Trong lập trình mạng, <strong>TCP Socket</strong> được sử dụng để thiết lập kết nối giữa <strong>client</strong> và <strong>server</strong> nhằm trao đổi dữ liệu một cách tin cậy.</p>
<p>Mỗi kết nối TCP gồm:</p>
<ul>
<li><strong>Địa chỉ IP</strong>: xác định thiết bị trong mạng.</li>
<li><strong>Cổng (Port)</strong>: xác định ứng dụng hoặc dịch vụ cụ thể.</li>
<li><strong>Socket</strong>: kết hợp giữa IP và port → tạo điểm cuối giao tiếp (endpoint).</li>
</ul>
<p>Ví dụ:<br>
<code>192.168.1.10:8080</code> là một socket.</p>
<hr>
<h2 id="2-cơ-chế-hoạt-động-của-tcp">2. Cơ chế hoạt động của TCP</h2>
<p>TCP đảm bảo dữ liệu được truyền tin cậy qua 3 giai đoạn chính:</p>
<h3 id="a-thiết-lập-kết-nối--three-way-handshake">a. Thiết lập kết nối – Three-way Handshake</h3>
<ol>
<li><strong>SYN</strong>: Client gửi yêu cầu kết nối đến Server.</li>
<li><strong>SYN-ACK</strong>: Server phản hồi đồng ý.</li>
<li><strong>ACK</strong>: Client xác nhận.<br>
➡ Kết nối được thiết lập thành công.</li>
</ol>
<h3 id="b-truyền-dữ-liệu">b. Truyền dữ liệu</h3>
<ul>
<li>Dữ liệu được chia thành các <strong>segment</strong> có số thứ tự.</li>
<li>TCP kiểm tra <strong>tính toàn vẹn</strong> và <strong>thứ tự</strong> của các gói.</li>
<li>Nếu gói bị mất, nó sẽ <strong>gửi lại</strong> (retransmission).</li>
<li>Đảm bảo dữ liệu đến <strong>đúng, đủ và đúng thứ tự</strong>.</li>
</ul>
<h3 id="c-đóng-kết-nối--four-way-handshake">c. Đóng kết nối – Four-way Handshake</h3>
<ol>
<li>Client gửi <strong>FIN</strong> (yêu cầu ngắt).</li>
<li>Server phản hồi <strong>ACK</strong>.</li>
<li>Server gửi <strong>FIN</strong>.</li>
<li>Client phản hồi <strong>ACK</strong>.<br>
➡ Kết nối kết thúc an toàn.</li>
</ol>
<hr>
<h2 id="3-mô-hình-tcp-client---server">3. Mô hình TCP Client - Server</h2>
<p>Khi lập trình mạng với TCP:</p>
<ul>
<li><strong>Server</strong> sẽ tạo <code>ServerSocket</code> để lắng nghe kết nối.</li>
<li><strong>Client</strong> sẽ tạo <code>Socket</code> để kết nối đến địa chỉ server.</li>
</ul>
<h3 id="quy-trình-tổng-quát">Quy trình tổng quát</h3>
<table>
  <thead>
      <tr>
          <th>Thành phần</th>
          <th>Vai trò</th>
          <th>Phương thức chính</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Server</td>
          <td>Chờ và xử lý yêu cầu</td>
          <td><code>ServerSocket.accept()</code></td>
      </tr>
      <tr>
          <td>Client</td>
          <td>Gửi yêu cầu kết nối</td>
          <td><code>new Socket(host, port)</code></td>
      </tr>
      <tr>
          <td>Cả hai</td>
          <td>Gửi và nhận dữ liệu</td>
          <td><code>InputStream</code>, <code>OutputStream</code></td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="4-ví-dụ-lập-trình-tcp-socket-với-java">4. Ví dụ lập trình TCP Socket với Java</h2>
<h3 id="file-serverjava">File: <code>Server.java</code></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.*;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.*;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> IOException {
</span></span><span style="display:flex;"><span>        ServerSocket serverSocket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ServerSocket(5000);
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Server đang chờ kết nối...&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Socket socket <span style="color:#f92672">=</span> serverSocket.<span style="color:#a6e22e">accept</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Client đã kết nối!&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        BufferedReader input <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedReader(<span style="color:#66d9ef">new</span> InputStreamReader(socket.<span style="color:#a6e22e">getInputStream</span>()));
</span></span><span style="display:flex;"><span>        PrintWriter output <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PrintWriter(socket.<span style="color:#a6e22e">getOutputStream</span>(), <span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        String message <span style="color:#f92672">=</span> input.<span style="color:#a6e22e">readLine</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Nhận từ client: &#34;</span> <span style="color:#f92672">+</span> message);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        output.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Server đã nhận: &#34;</span> <span style="color:#f92672">+</span> message);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        socket.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>        serverSocket.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="file-clientjava">File: <code>Client.java</code></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.*;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.*;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Client</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> IOException {
</span></span><span style="display:flex;"><span>        Socket socket <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Socket(<span style="color:#e6db74">&#34;localhost&#34;</span>, 5000);
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Kết nối thành công với server!&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        BufferedReader input <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedReader(<span style="color:#66d9ef">new</span> InputStreamReader(System.<span style="color:#a6e22e">in</span>));
</span></span><span style="display:flex;"><span>        PrintWriter output <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PrintWriter(socket.<span style="color:#a6e22e">getOutputStream</span>(), <span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>        BufferedReader serverResponse <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedReader(<span style="color:#66d9ef">new</span> InputStreamReader(socket.<span style="color:#a6e22e">getInputStream</span>()));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;Nhập tin nhắn gửi server: &#34;</span>);
</span></span><span style="display:flex;"><span>        String message <span style="color:#f92672">=</span> input.<span style="color:#a6e22e">readLine</span>();
</span></span><span style="display:flex;"><span>        output.<span style="color:#a6e22e">println</span>(message);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        String response <span style="color:#f92672">=</span> serverResponse.<span style="color:#a6e22e">readLine</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Phản hồi từ server: &#34;</span> <span style="color:#f92672">+</span> response);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        socket.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="cách-chạy">Cách chạy:</h3>
<ol>
<li>Biên dịch cả hai file:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>javac Server.java Client.java
</span></span></code></pre></div></li>
<li>Chạy server trước:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>java Server
</span></span></code></pre></div></li>
<li>Sau đó chạy client:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>java Client
</span></span></code></pre></div></li>
</ol>
<hr>
<h2 id="5-ưu-điểm-của-tcp-socket">5. Ưu điểm của TCP Socket</h2>
<table>
  <thead>
      <tr>
          <th>Ưu điểm</th>
          <th>Mô tả</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Đảm bảo dữ liệu</td>
          <td>Dữ liệu đến đúng thứ tự, không mất gói</td>
      </tr>
      <tr>
          <td>Kiểm soát lỗi</td>
          <td>Có cơ chế kiểm tra checksum</td>
      </tr>
      <tr>
          <td>Truyền tin cậy</td>
          <td>Có xác nhận (ACK) và gửi lại khi lỗi</td>
      </tr>
      <tr>
          <td>Hướng kết nối</td>
          <td>Tạo kênh giao tiếp ổn định giữa hai bên</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="6-ứng-dụng-thực-tế-của-tcp-socket">6. Ứng dụng thực tế của TCP Socket</h2>
<ul>
<li>Ứng dụng <strong>chat thời gian thực</strong> (Zalo, Messenger bản desktop)</li>
<li>Ứng dụng <strong>truyền file</strong> giữa client – server</li>
<li>Hệ thống <strong>game online</strong> (gửi dữ liệu vị trí, hành động người chơi)</li>
<li>Dịch vụ <strong>Web, API server</strong> (HTTP dựa trên TCP)</li>
<li>Ứng dụng <strong>IoT</strong> (truyền dữ liệu cảm biến đến máy chủ)</li>
</ul>
<hr>
<h2 id="7-kết-luận">7. Kết luận</h2>
<p><strong>TCP Socket</strong> là nền tảng cốt lõi trong lập trình mạng giúp đảm bảo dữ liệu truyền tải ổn định và chính xác.<br>
Việc nắm vững cơ chế handshake, truyền dữ liệu, đóng kết nối sẽ giúp bạn dễ dàng xây dựng các ứng dụng <strong>client-server</strong> tin cậy và hiệu quả.</p>
<hr>
<p>Tác giả: Nguyễn Tiến Phước<br>
Học phần: Lập trình mạng cơ bản</p>
<hr>
<h1 id="c--giới-thiệu">C++ — Giới thiệu</h1>
<p>Tóm tắt: C++ là ngôn ngữ hệ thống mạnh, hỗ trợ lập trình hướng đối tượng và lập trình thủ tục.</p>
<p>Mục tiêu:</p>
<ul>
<li>Thiết lập môi trường (g++, clang).</li>
<li>Biết cú pháp cơ bản: biến, hàm, class, pointer.</li>
<li>Hiểu quản lý bộ nhớ và STL cơ bản.</li>
</ul>
<p>Bài tập:</p>
<ol>
<li>Viết chương trình in &ldquo;Hello, C++!&rdquo;.</li>
<li>Viết hàm sắp xếp đơn giản sử dụng vector.</li>
</ol>
<p>Tài nguyên:</p>
<ul>
<li><a href="https://en.cppreference.com/">https://en.cppreference.com/</a></li>
</ul>

    </article>
    
  </main>

    <footer>
  
  
  <button id="back-to-top" aria-label="Trở về đầu trang">
    <i class="fas fa-arrow-up"></i>
  </button>
</footer>


<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
/>

<script>
  
  const backToTopBtn = document.getElementById('back-to-top');
  
  
  window.addEventListener('scroll', () => {
    if (window.pageYOffset > 300) {
      backToTopBtn.classList.add('show');
    } else {
      backToTopBtn.classList.remove('show');
    }
  });
  
  
  backToTopBtn.addEventListener('click', () => {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  });
</script>


</body>
</html>
